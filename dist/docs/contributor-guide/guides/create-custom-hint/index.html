<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Create a custom hint step-by-step | webhint documentation</title> <meta property="og:image" content="/static/images/apple-touch-icon-c01d89d4f3.png"><meta property="og:description" content="webhint, a linting tool for the web focused on best practices and flexibility for the end user"><meta property="og:title" content="Create a custom hint step-by-step"><meta name="description" content="webhint, a linting tool for the web focused on best practices and flexibility for the end user"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#4046dd"><link rel="manifest" href="/static/site-ba9e7c1c31.webmanifest"><link rel="apple-touch-icon" href="/static/images/apple-touch-icon-c01d89d4f3.png"><link type="application/opensearchdescription+xml" rel="search" href="/static/opensearch-e74f2b7427.xml" title="webhint"><link rel="icon" href="/static/images/favicon-dd9d5dff4e.ico"> <link rel="stylesheet" href="/static/styles/common-72d8f8f3a6.css" integrity="sha384-dEjqXiP7yoNv7imifzs8pJ8NRP1lWTkEVwNbzTpslGsK2OCQY3PsVHB/p5zGrVVT" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" integrity="sha384-mHx5KeR3zcLviQFPmpHqrwf2uxtukRvUFVzOMOqIjKjSNrurxlmJ3oS+vm49Mz07" crossorigin="anonymous"><link rel="stylesheet" href="/static/styles/docs-05234f2758.css" integrity="sha384-WG8oH0+JVs8yp6CW4dzCSdEuXZ7n1mR5xKjHyNzp+NSZN2B8Bq3f+zrsNQOHsGwh" crossorigin="anonymous"></head><body><div id="disclaimer" class="disclaimer">This site uses cookies for analytics. By continuing to browse this site, you agree to this use. <button class="close" aria-label="close">X</button></div> <header class="header"><div class="header-social"><div class="header-social__container container"><img src="/static/images/jsf_logo_white-a73061e34d.svg" alt="A JS Foundation Project"><ul class="header-social__list"><li class="github-icon"><a href="https://github.com/webhintio" aria-label="Follow webhint on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path class="github-icon-svg-header" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a href="https://twitter.com/narwhalnellie" aria-label="Follow webhint on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 24"><path class="twitter-icon-svg-header" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li><li class="medium-icon"><a href="https://medium.com/webhint" aria-label="Follow webhint on Medium"><svg xmlns="http://www.w3.org/2000/svg" viewBox="4 2 40 40"><path class="medium-icon-svg-header" d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.7-.32 1.03l-2.45 3v.38h6.9v-.4l-2.4-2.98c-.3-.34-.35-.5-.35-1.03v-8.95l6.13 13.36h.7L27 18.42v10.64c0 .3 0 .35-.2.53L25 31.4v.37h9.2v-.4l-1.82-1.8c-.2-.17-.22-.23-.22-.52v-13.1c0-.3.03-.36.2-.54l1.83-1.8v-.32h-6.5L23.1 24.8l-5.2-11.55h-6.8v.4l2.14 2.63c.24.3.3.37.3.77V27.4z"/></svg></a></li></ul></div></div><div class="nav-bar container"><nav class="nav"><a href="/" class="clear logo--container"><img src="/static/images/webhint-logo-738912f920.svg" alt="webhint" class="header__logo navbar__navitem"></a><ul class="nav__navbar"><li class="navbar__navitem"><a role="button" href="/scanner/" id="scanner" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-scanner" class="navitem__button ">Scanner</a> </li><li class="navbar__navitem"><a role="button" href="/docs/" id="docs" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-docs" class="navitem__button expandable">Documentation</a> <ul role="group" id="submenu-docs" class="navbar__submenu" aria-hidden="true"><li><a href="/docs/contributor-guide/">Contributor Guide</a></li><li><a href="/docs/user-guide/hints/">Hints</a></li><li><a href="/docs/user-guide/">User Guide</a></li></ul></li><li class="navbar__navitem"><a role="button" href="/about/" id="about" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-about" class="navitem__button expandable">About</a> <ul role="group" id="submenu-about" class="navbar__submenu" aria-hidden="true"><li><a href="/about/faq/">FAQ</a></li><li><a href="/about/changelog/">Changelog</a></li><li><a href="/about/governance/">Governance</a></li><li><a href="https://js.foundation/community/code-of-conduct">Code of Conduct</a></li></ul></li></ul><div class="nav-bar--container"><div class="nav-bar__input"><form action="/search" method="GET"><label for="search-input" class="visually-hidden">Search the documentation</label> <input type="search" id="search-input" placeholder="Search Documentation" name="q" aria-label="Search"> <button type="submit" aria-label="search" class="button-search"></button></form></div><button class="mobile-close-button" aria-label="Close Search Overlay">Close</button></div><div class="nav-bar--mobile-buttons"><button class="header__toggle mobile-nav-button" aria-label="Menu"></button> <button class="header__toggle mobile-search-button" aria-label="Search"></button></div></nav></div></header><main class="container">  <article class="content" aria-labelledby="page-heading"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/">Home</a></li><li><a href="../../../">Documentation</a></li><li><a href="../../" class="guide-category">Contributor guide</a></li><li aria-current="location">Create a custom hint step-by-step</li></ul></nav><header class="page-intro"><h1 id="page-heading">Create a custom hint step-by-step</h1><div class="documentation-actions"><ul><li><a target="_blank" href="https://github.com/webhintio/hint/edit/master/packages/hint/docs/contributor-guide/guides/create-custom-hint.md">Edit</a></li><li><a target="_blank" href="https://github.com/webhintio/hint/issues/new?title&#x3D;%5Bdocs%5D%20Issue%20with%20&#x27;Create%20a%20custom%20hint%20step-by-step&#x27;&amp;body&#x3D;https%3A%2F%2Fwebhint.io%2Fdocs%2Fcontributor-guide%2Fguides%2Fcreate-custom-hint%2Findex.html">Signal Issue</a></li></ul></div></header><div class="section" id="main"><div class="layout layout--sidebar"><div class="module module--secondary mobile-view"><ul class="toc-mobile-view"><li><p role="button" id="mobile-toc" aria-controls="mobile-toc-submenu" aria-expanded="false" aria-haspopup="true" class="toc-mobile-view__button expandable">Contributor guide</p><ul role="group" class="toc-mobile-view__dropdown" id="mobile-toc-submenu" aria-hidden="true"><li class="dropdown__subitem"><a href="../../" class="subitem--single">Getting Started</a></li> <li class="dropdown__subitem"><p>Getting started</p><ul><li class="subitem"><a href="/docs/contributor-guide/getting-started/architecture/">Architecture</a></li><li class="subitem"><a href="/docs/contributor-guide/getting-started/development-environment/">Development environment</a></li><li class="subitem"><a href="/docs/contributor-guide/getting-started/events/">Events</a></li><li class="subitem"><a href="/docs/contributor-guide/getting-started/pull-requests/">Pull requests</a></li></ul></li><li class="dropdown__subitem"><p>Guides</p><ul><li class="subitem"><a href="/docs/contributor-guide/guides/create-custom-hint/">Create a custom hint step-by-step</a></li></ul></li><li class="dropdown__subitem"><p>How to</p><ul><li class="subitem"><a href="/docs/contributor-guide/how-to/connector/">Develop a connector</a></li><li class="subitem"><a href="/docs/contributor-guide/how-to/formatter/">Develop a formatter</a></li><li class="subitem"><a href="/docs/contributor-guide/how-to/hint/">Develop a hint</a></li><li class="subitem"><a href="/docs/contributor-guide/how-to/parser/">Develop a parser</a></li><li class="subitem"><a href="/docs/contributor-guide/how-to/common-hint-scenarios/">Implement common hint scenarios</a></li><li class="subitem"><a href="/docs/contributor-guide/how-to/test-rules/">Test a hint</a></li></ul></li></ul></li></ul></div><div class="module module--secondary table-of-contents treeview main-view" role="navigation"><ul role="tree" aria-labelledby="page-heading" tabindex="0"><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class=" toc-section-title "><span class="text">Getting started</span> <span class="icon"></span></div><ul role="group"><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/getting-started/architecture/" tabindex="-1">Architecture</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/getting-started/development-environment/" tabindex="-1">Development environment</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/getting-started/events/" tabindex="-1">Events</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/getting-started/pull-requests/" tabindex="-1">Pull requests</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="true"><div class=" toc-section-title--active "><span class="text">Guides</span> <span class="icon"></span></div><ul role="group"><li role="treeitem" aria-selected="true"><div class=" toc-subsection-title--active " aria-current="location"><a class="text" href="/docs/contributor-guide/guides/create-custom-hint/" tabindex="0">Create a custom hint step-by-step</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class=" toc-section-title "><span class="text">How to</span> <span class="icon"></span></div><ul role="group"><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/how-to/connector/" tabindex="-1">Develop a connector</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/how-to/formatter/" tabindex="-1">Develop a formatter</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/how-to/hint/" tabindex="-1">Develop a hint</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/how-to/parser/" tabindex="-1">Develop a parser</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/how-to/common-hint-scenarios/" tabindex="-1">Implement common hint scenarios</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/contributor-guide/how-to/test-rules/" tabindex="-1">Test a hint</a></div></li></ul></li></ul></div><div class="module module--primary wrap-text"> <h1 id="create-a-custom-hint-step-by-step">Create a custom hint step-by-step<a href="#create-a-custom-hint-step-by-step" class="headerlink" title="Create a custom hint step-by-step"></a></h1><p>Imagine that we have a new change in the webhint website - we’d like
to add a footer containing the copyright information <code>(c) webhint</code> and
we need to verify that this footer is always present in the page before
deployment. Let’s see how we can write this as a hint for webhint so
that we can use webhint to validate the copyright in the footer for us.</p>
<h2 id="what-is-a-hint">What is a hint?<a href="#what-is-a-hint" class="headerlink" title="What is a hint?"></a></h2><p>First of all, let’s grasp what a hint is and how it works. A hint is at
the core of webhint, it is a check that is used to verify if something
was done as intended. In our example, if a page doesn’t have a footer or
has a footer but misses the <code>(c) webhint part</code>, the hint fails. Otherwise
it passes. A hint subscribes to one or more events that are emitted from
a connector. A connector is the way webhint gets the information about
a website or a resource using a browser, or something different that reads
files from disk. For example, if a hint subscribes to <code>fetch::end::&lt;resource-type&gt;</code>,
it means this hint will run each time the connector finishes downloading
a resource file.</p>
<h2 id="what-is-it-like-to-create-a-new-hint">What is it like to create a new hint?<a href="#what-is-it-like-to-create-a-new-hint" class="headerlink" title="What is it like to create a new hint?"></a></h2><p>The recommended way to create a new hint is to use <code>npm init hint</code> from the
CLI. Support for bootstrapping custom hint has shipped in webhint since
v1.0.0.</p>
<p><strong>Note</strong>: If you are creating a new hint for the main repo you can use
<code>yarn new:hint</code> or <code>npm run new:hint</code> from the root and it will be created
automatically in the <code>packages</code> folder.</p>
<p>At this point, a wizard will ask a series of questions relevant to the new hint,
including the name, description, category, etc. In particular, you will be asked
to select the category of the use case for the new hints. Depending on the
answer, webhint will automatically decide which <code>event</code>(s) it should subscribe
the hint to. Of course, you can subscribe to others if needed. The list below
might help if you wonder what those options mean:</p>
<ul>
<li><code>DOM</code>: Is your hint checking a particular <code>DOM</code> element like <code>head</code> or
<code>link</code> ?</li>
<li><code>Resource Request</code>: Does your hint rely on the loading of a resource like
<code>script</code>, <code>stylesheet</code>, or an <code>image</code>?</li>
<li><code>Third Party Service</code>: Does your hint integrate with a third-party service?</li>
<li><code>JavaScript Injection</code>: Do you need to inject a script in the page and wait
for the results to execute your test?</li>
</ul>
<p>In our case, we’d like to check the content of the footer element, so we select
DOM and then type input footer. Wait for a second… Voilà! A new folder called
<code>hint-validate-footer</code> is created, with a bunch of templates in it. The main
structure of the folder is like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hint-validate-footer</span><br><span class="line">├── src</span><br><span class="line">│   └── hints</span><br><span class="line">│   │      └── validate-footer</span><br><span class="line">│   │             └── validate-footer.ts</span><br><span class="line">│   └── index.ts</span><br><span class="line">└── tests</span><br><span class="line">    └── validate-footer</span><br><span class="line">          └── test.ts</span><br></pre></td></tr></table></figure>
<p>The next main thing to do is to populate the <code>validate-footer.ts</code> and <code>test.ts</code>
with our actual hint and tests. But before that, we need to navigate to the hint
folder and run <code>npm run init</code>. This command does two things:</p>
<ol>
<li>install all the dependencies</li>
<li>build the project, which compiles the TypeScript to JavaScript in the <code>dist</code>
folder (support for creating JavaScript hints via webhint’s CLI will be
added in a future release, but you can manually do it now).</li>
</ol>
<p>Do remember that since a compilation is needed, you have to run build every time
after you make changes to the .ts files. Or alternatively, you run <code>npm run watch:ts</code> in the terminal and the project builds itself after each update. <em>If
your debugger never stops at the break point you set up, it’s very likely
because you forgot to build your project after making changes.</em></p>
<h2 id="how-do-we-write-the-hint">How do we write the hint?<a href="#how-do-we-write-the-hint" class="headerlink" title="How do we write the hint?"></a></h2><p>Now navigate to <code>src/hints/validate-footer/validate-footer.ts</code>. You can see that
there is already some code there. The hint class contains a constructor
<code>constructor</code> and a static property <code>meta</code>.
At the end of the <code>constructor</code>, it use <code>context.on</code> to subscribe the hint
to events the hint needs to listen to. The parameters for  <code>contexts.on</code> are the
name of the event and the validating function triggered upon the
events. In the generated template by the wizard, the <code>element::footer</code> event is
already populated for us so we can focus on implementing the actual
validateFooter function. As shown in the code below, we have access to the
footer element in the page and use that for our check - if the HTML doesn’t
include the target string, we simply file a report by calling <code>context.report</code>
with the <em>resource</em> (URL), the <em>element</em> (footer), and the <em>error message</em>.
Note that <code>context.report</code> is an asynchronous method, so always use <code>await</code>.</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> FooterHint <span class="keyword">implements</span> IHint &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> readonly meta: HintMetadata = &#123;</span><br><span class="line">        docs: &#123;</span><br><span class="line">            category: Category.other,</span><br><span class="line">            description: <span class="string">`A hint to validate footer`</span></span><br><span class="line">        &#125;,</span><br><span class="line">        id: <span class="string">'footer'</span>,</span><br><span class="line">        recommended: <span class="literal">false</span>,</span><br><span class="line">        schema: [],</span><br><span class="line">        worksWithLocalFiles: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">constructor</span>(<span class="params">context: HintContext</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> stringToBeIncluded = <span class="string">`(c) webhint`</span>;</span><br><span class="line">        <span class="keyword">const</span> validateFooter = <span class="keyword">async</span> (elementFound: ElementFound) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; element, resource &#125; = elementFound;</span><br><span class="line">            <span class="keyword">const</span> footerHTML = <span class="keyword">await</span> element.outerHTML();</span><br><span class="line"></span><br><span class="line">            debug(<span class="string">`Validating hint validate-footer`</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!footerHTML.includes(stringToBeIncluded)) &#123;</span><br><span class="line">                <span class="keyword">await</span> context.report(resource, element, <span class="string">`"<span class="subst">$&#123;stringToBeIncluded&#125;</span>" is not included in the footer.`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        context.on(<span class="string">'element::footer'</span>, validateFooter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And now run <code>hint https://webhint.io</code> in the terminal and wait for the
scan to complete. Ta-Dah! We get the result below. It reports an error since we
don’t have the <code>(c) webhint</code> footer in the webhint.io home page.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https://webhint.io/</span><br><span class="line">line 1  col 8379  Error  &quot;(c) webhint&quot; is not included in the footer.  validate-footer</span><br><span class="line">✖ Found 1 error and 0 warnings</span><br><span class="line"></span><br><span class="line">✖ Found a total of 1 error and 0 warnings</span><br></pre></td></tr></table></figure>
<p>You might be wondering what if the page doesn’t include a footer at all, then
the <code>footer::element</code> event will never be emitted. You can find the completed
code to address this in <a href="https://github.com/qzhou1607/sonarwhal-external-rule-demo/blob/9e350afa23e4bd3245745afddc3a0cef4795f60b/src/rules/validate-footer/validate-footer.ts" target="_blank" rel="nofollow noreferrer noopener">validate-footer.ts</a> of <a href="https://github.com/qzhou1607/sonarwhal-external-rule-demo" target="_blank" rel="nofollow noreferrer noopener">this
repository</a>. The general idea is to subscribe the hint to another
event <code>traverse::end</code>, and validate the existence of the <code>footer</code> element at the
end of the DOM tree traversal.</p>
<h2 id="how-do-we-config-the-hint">How do we config the hint?<a href="#how-do-we-config-the-hint" class="headerlink" title="How do we config the hint?"></a></h2><p>So what if you decided to change the copyright text content? Altering the hint
itself every time is messy, and webhint makes it easy to add config options
for a hint, You have access to the config properties through
<code>context.hintOptions</code> and you can load the dynamic value of the target string
when the hint is loaded.</p>
<p>In our case, we define a config option with the key of <code>stringToBeIncluded</code>. And
if this config is not defined, the target string falls back to <code>(c) webhint</code>.
Meanwhile, we also need to specify the JSON schema of the configurable options
in the <code>meta</code> part of the hint constructor. This helps the hint to decide if a
config option is valid before using it.</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> CopyrightHint <span class="keyword">implements</span> IHint &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> readonly meta: HintMetadata = &#123;</span><br><span class="line">        docs: &#123;</span><br><span class="line">            category: Category.other,</span><br><span class="line">            description: <span class="string">`A new hint to validate footer`</span></span><br><span class="line">        &#125;,</span><br><span class="line">        id: <span class="string">'copyright'</span>,</span><br><span class="line">        recommended: <span class="literal">false</span>,</span><br><span class="line">        schema: [&#123;</span><br><span class="line">            additionalProperties: <span class="literal">false</span>,</span><br><span class="line">            properties: &#123;</span><br><span class="line">                <span class="comment">// Define JSON schema for the config options.</span></span><br><span class="line">                stringToBeIncluded: &#123; <span class="keyword">type</span>: <span class="string">'string'</span> &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;],</span><br><span class="line">        worksWithLocalFiles: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">constructor</span>(<span class="params">context: HintContext</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> stringToBeIncluded;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> loadHintConfigs = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// Load Config options.</span></span><br><span class="line">            stringToBeIncluded = (context.hintOptions &amp;&amp; context.hintOptions.stringToBeIncluded) || <span class="string">`(c) webhint`</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> validateFooter = <span class="keyword">async</span> (elementFound: ElementFound) =&gt; &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line">        loadHintConfigs();</span><br><span class="line"></span><br><span class="line">        context.on(<span class="string">'element::footer'</span>, validateFooter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Accordingly, when running webhint, we need to pass in the config values. We do
it in the config file for webhint, <code>.hintrc</code> in the root directory. For
example, if we’d like to validate the presence of <code>(c) webhint.com</code> in the
footer instead, we define the value of <code>stringToBeIncluded</code> in an object
following the severity level.</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"validate-footer"</span>: [</span><br><span class="line">    <span class="string">"error"</span>,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"stringToBeIncluded"</span>: <span class="string">"(c) webhint.io"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now let’s run the hint again and here is what we get. Did you notice that now
instead of checking for <code>(c) webhint</code>, the hint reports the missing of <code>(c) webhint.io</code>? Hooray!</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https://webhint.io/</span><br><span class="line">line 1  col 8403  Error  &quot;(c) webhint.io&quot; is not included in the footer.  validate-footer</span><br><span class="line">✖ Found 1 error and 0 warnings</span><br><span class="line"></span><br><span class="line">✖ Found a total of 1 error and 0 warnings</span><br></pre></td></tr></table></figure>
<h2 id="how-do-we-add-the-tests">How do we add the tests?<a href="#how-do-we-add-the-tests" class="headerlink" title="How do we add the tests?"></a></h2><p>Navigate to <code>src/tests/validate-footer/test.ts</code>, we will start from the
generated template. The <code>testHint</code> method in the hintRunner takes three
arguments,the <em>name</em> of the hint, the <em>tests</em>, and the <em>hint config options</em>
(optional). The <em>tests</em> are defined as an array of objects, with each object
representing a test scenario. By defining <code>serverConfig</code> in each test, we are
able to mock the response from a target website and webhint will compare the
actual scanning result with the messages listed in reports. The
<code>generateHTMLPage</code> helper function shipped with webhint comes in handy as a
wrapper when you need HTML containing an element of interest. Here is what the
tests look like, three scenarios are mocked:</p>
<ul>
<li>A footer exists and it contains the target string. <code>pass</code></li>
<li>No footer exists in the page.  <code>fail</code></li>
<li>A footer exists, but it doesn’t contain the target string. <code>fail</code></li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> footer = &#123;</span><br><span class="line">    noFooter: <span class="string">``</span>,</span><br><span class="line">    noProblem: <span class="string">`&lt;footer&gt;(c) webhint&lt;/footer&gt;`</span>,</span><br><span class="line">    wrongTextInFooter: <span class="string">`&lt;footer&gt;(c) webhint&lt;/footer&gt;`</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultTests: <span class="built_in">Array</span>&lt;HintTest&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">`Footer exists and it contains '(c) webhint'`</span>,</span><br><span class="line">        serverConfig: generateHTMLPage(<span class="string">''</span>, footer.noProblem)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">`Footer doesn't exist`</span>,</span><br><span class="line">        reports: [&#123; message: <span class="string">`&lt;footer&gt; element doesn't exist in this page.`</span> &#125;],</span><br><span class="line">        serverConfig: generateHTMLPage(<span class="string">''</span>, footer.noFooter)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">`Footer exists, but doesn't contain '(c) webhint'`</span>,</span><br><span class="line">        reports: [&#123; message: <span class="string">`"(c) webhint" is not included in the footer.`</span> &#125;],</span><br><span class="line">        serverConfig: generateHTMLPage(<span class="string">''</span>, footer.wrongTextInFooter)</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tests that use the default target string.</span></span><br><span class="line">hintRunner.testHint(hintPath, defaultTests);</span><br></pre></td></tr></table></figure>
<p>Run <code>npm run test</code> in the terminal, and webhint will run them in all the
available connectors.</p>
<p>See the complete code example in <a href="https://github.com/qzhou1607/sonarwhal-external-rule-demo" target="_blank" rel="nofollow noreferrer noopener">this repository</a>.</p>
 </div></div><a href="#main" class="anchor-top" hidden aria-label="back to top">top</a></div></article>  </main><footer class="footer footer--home"><div class="footer-nav container"><div class="footer-nav__item"><p class="category"><a href="/scanner/">Scanner</a></p><ul></ul></div><div class="footer-nav__item"><p class="category"><a href="/docs/">Documentation</a></p><ul><li><a href="/docs/contributor-guide/" data-ga-category="docs" data-ga-action="Contributor Guide" data-ga-label="footer">Contributor Guide</a></li><li><a href="/docs/user-guide/hints/" data-ga-category="docs" data-ga-action="Hints" data-ga-label="footer">Hints</a></li><li><a href="/docs/user-guide/" data-ga-category="docs" data-ga-action="User Guide" data-ga-label="footer">User Guide</a></li></ul></div><div class="footer-nav__item"><p class="category"><a href="/about/">About</a></p><ul><li><a href="/about/faq/" data-ga-category="docs" data-ga-action="FAQ" data-ga-label="footer">FAQ</a></li><li><a href="/about/changelog/" data-ga-category="docs" data-ga-action="Changelog" data-ga-label="footer">Changelog</a></li><li><a href="/about/governance/" data-ga-category="docs" data-ga-action="Governance" data-ga-label="footer">Governance</a></li><li><a href="https://js.foundation/community/code-of-conduct" data-ga-category="docs" data-ga-action="Code of Conduct" data-ga-label="footer">Code of Conduct</a></li></ul></div><ul class="footer-nav__item social-list"><li class="github-icon"><a href="https://github.com/webhintio" aria-label="Follow webhint on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path class="github-icon-svg" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a href="https://twitter.com/narwhalnellie" aria-label="Follow webhint on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 24"><path class="twitter-icon-svg" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li><li class="medium-icon"><a href="https://medium.com/webhint" aria-label="Follow webhint on Medium"><svg xmlns="http://www.w3.org/2000/svg" viewBox="4 2 40 40"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.7-.32 1.03l-2.45 3v.38h6.9v-.4l-2.4-2.98c-.3-.34-.35-.5-.35-1.03v-8.95l6.13 13.36h.7L27 18.42v10.64c0 .3 0 .35-.2.53L25 31.4v.37h9.2v-.4l-1.82-1.8c-.2-.17-.22-.23-.22-.52v-13.1c0-.3.03-.36.2-.54l1.83-1.8v-.32h-6.5L23.1 24.8l-5.2-11.55h-6.8v.4l2.14 2.63c.24.3.3.37.3.77V27.4z" class="medium-icon-svg"/></svg></a></li></ul></div></footer><script src="/static/scripts/treeview-b2395a787e.js" integrity="sha384-vf5VEm5YhuAisn2Nv1RhG4X9nEwlDKeeHDzsHnEEdGP2xqedcnoHQBJKOpapJ3Ag" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js" integrity="sha384-bpcisN7hXHzDmg5JLgtPet7fpev9Wwwqgw8zlXpOh7AkvJ+wYjwrMzHH8fVvq1Dq" crossorigin="anonymous"></script><script src="/static/scripts/common-82774ec904.js" integrity="sha384-Sq0CJ5fIn92odldxyuEpw4FGTvJiXyTlJ7rE4wkHLhpF9zKPiLOxOTaQijjcsYUo" crossorigin="anonymous"></script><script>!function(){var n,e=docsearch({apiKey:"2ee58f908e6d720c4f72a9645ce0e857",indexName:"webhint",inputSelector:"#search-input",appId:"0R8E5SPAFP",debug:!1,handleSelected:function(e,t,o){window.innerWidth<n?t.target.closest("form").submit():window.location.href=o.url}}),t=document.querySelector(".algolia-autocomplete .ds-dropdown-menu");n=parseInt(window.getComputedStyle(t).minWidth),e.autocomplete.on("autocomplete:opened",function(){document.body.clientWidth<n&&e.autocomplete.autocomplete.close()})}()</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101540923-1","auto"),ga("set","transport","beacon"),ga("set","anonymizeIp",!0),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js"></script></body></html>